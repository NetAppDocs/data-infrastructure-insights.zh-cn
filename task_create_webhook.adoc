---
sidebar: sidebar 
permalink: task_create_webhook.html 
keywords: webhook, notification, slack, integration 
summary: 创建监视器以对性能或库存阈值发出警报 
---
= 使用 Webhook 进行通知
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Webhook 允许用户使用自定义的 webhook 通道向各种应用程序发送警报通知。

很多商业应用都支持webhooks作为标准输入接口，例如：Slack、PagerDuty、Teams、Discord都支持webhooks。通过支持通用、可定制的 webhook 通道， Data Infrastructure Insights可以支持许多此类交付通道。可以在这些应用程序网站上找到有关 webhook 的信息。例如，Slack 提供link:https://api.slack.com/messaging/webhooks["这个有用的指南"]。

您可以创建多个 webhook 通道，每个通道针对不同的目的；单独的应用程序、不同的收件人等。

Webhook 通道实例由以下元素组成：

|===


| 名称 | 唯一名称 


| URL | Webhook 目标 URL，包括 _http://_ 或 _https://_ 前缀以及 URL 参数 


| 方法 | GET、POST - 默认为 POST 


| 自定义标题 | 在此指定任何自定义标题行 


| 消息正文 | 在此处填写您的邮件正文 


| 默认警报参数 | 列出 webhook 的默认参数 


| 自定义参数和机密 | 自定义参数和秘密允许您添加唯一参数和安全元素，例如密码 
|===


== 创建 Webhook

要创建Data Infrastructure Insightswebhook，请转到 *管理 > 通知* 并选择 *Webhooks* 选项卡。

下图显示了为 Slack 配置的示例 webhook：

image:Webhook_Example_Slack.png["Webhook 示例"]

在每个字段中输入适当的信息，完成后单击“保存”。

您也可以点击“测试 Webhook”按钮来测试连接。请注意，这将根据所选方法将“消息正文”（不带替换）发送到定义的 URL。

Data Infrastructure Insightswebhook 包含许多默认参数。此外，您还可以创建自己的自定义参数或秘密。

image:Webhook_Default_Parameters.png["Data Infrastructure Insights默认 Webhook 参数"]



=== 参数：它们是什么以及如何使用它们？

警报参数是每个警报填充的动态值。例如，_%%TriggeredOn%%_ 参数将被替换为触发警报的对象。

您可以将任何对象属性（例如，存储名称）作为参数添加到 webhook。例如，您可以在 webhook 描述中设置卷名称和存储名称的参数，如：“卷的高延迟：_%%relatedObject.volume.name%%_，存储：_%%relatedObject.storage.name%%_”。

请注意，在本节中，单击“测试 Webhook”按钮时不会执行替换；该按钮发送一个显示 _%%_ 替换的有效负载，但不会用数据替换它们。



=== 自定义参数和机密

在本节中，您可以添加任何您想要的自定义参数和/或秘密。出于安全原因，如果定义了机密，则只有 webhook 创建者可以修改此 webhook 通道。对于其他人来说它是只读的。您可以在 URL/Headers 中使用秘密作为 _%%<secret_name>%%_。



=== Webhook 列表页面

Webhooks 列表页面显示名称、创建者、创建日期、状态、安全和上次报告字段。



== 在监视器中选择 Webhook 通知

要选择 webhook 通知link:task_create_monitor.html["监视器"]，转到*警报>管理监视器*并选择所需的监视器，或添加新的监视器。在“设置团队通知”部分，选择“Webhook”作为传送方式。选择警报级别（严重、警告、已解决），然后选择所需的 webhook。

image:Webhook_Monitor_Notify.png["Webhook 监控通知"]



== Webhook 示例：

Webhook 适用于link:task_webhook_example_slack.html["松弛"]Webhook 适用于link:task_webhook_example_pagerduty.html["PagerDuty"]Webhook 适用于link:task_webhook_example_teams.html["团队"]Webhook 适用于link:task_webhook_example_discord.html["不和谐"]
