---
sidebar: sidebar 
permalink: task_dc_emc_vnx_block.html 
keywords: data collector, EMC, clariion, VNX block 
summary: 配置 DELL EMC VNX 块存储（以前称为 CLARiiON）。 
---
= Dell EMC VNX 块存储 (NaviCLI) 数据收集器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights使用 Dell EMC VNX Block Storage（NaviSec）数据收集器（以前称为 CLARiiON）来获取库存和性能数据。



== Terminology

Data Infrastructure Insights从 EMC VNX 块存储数据收集器获取以下库存信息。对于Data Infrastructure Insights获取的每种资产类型，都会显示用于该资产的最常用术语。查看或排除此数据收集器的故障时，请记住以下术语：

[cols="2*"]
|===
| 供应商/型号术语 | Data Infrastructure Insights术语 


| 磁盘 | 磁盘 


| 存储 | 存储 


| 存储处理器 | 存储节点 


| 此池、RAID 组 | 存储池 


| LUN | 卷 
|===
注意：这些只是常用术语映射，可能并不代表此数据源的所有情况。



== 要求

为了收集数据，必须满足以下要求：

* 每个 VNX 块存储处理器的 IP 地址
* VNX 块存储阵列的只读 Navisphere 用户名和密码
* NaviSecCli 必须安装在Data Infrastructure Insights AU 上
* 访问验证：使用用户名和密码从Data Infrastructure InsightsAU 运行 NaviSecCLI 到每个阵列。
* 端口要求：80、443
* NaviSecCLI 版本应与阵列上的最新 FLARE 代码相对应
* 为了提高性能，必须启用统计日志记录。




== NaviSphere 命令行界面语法

naviseccli.exe -h <IP 地址> -user <用户> -password <密码> -scope <范围，使用 0 表示全局范围> -port <默认使用 443> 命令



== 配置

[cols="2*"]
|===
| 字段 | 描述 


| VNX 块存储 IP 地址 | VNX 块存储的 IP 地址或完全限定域名 


| 用户名 | 用于登录 VNX 块存储设备的名称。 


| 密码 | 用于登录 VNX 块存储设备的密码。 


| naviseccli.exe 的 CLI 路径 | 包含 _naviseccli.exe_ 可执行文件的文件夹的完整路径 
|===


== 高级配置

[cols="2*"]
|===
| 字段 | 描述 


| 库存轮询间隔（分钟） | 库存调查之间的间隔。默认为 40 分钟。 


| 范围 | 安全客户端范围。默认为全局。 


| 性能轮询间隔（秒） | 性能轮询之间的间隔。默认值为 300 秒。 
|===


== 故障排除

如果您在使用此数据收集器时遇到问题，请尝试以下操作：



=== 清单

[cols="2a, 2a"]
|===
| 问题： | 尝试一下： 


 a| 
错误:

* 代理未运行
* 找不到 naviseccli
* 无法执行任何命令

 a| 
* 确认 NaviSphere CLI 已安装在 Cloud Insight Acquisition Unit 上
* 您尚未在数据收集器配置向导中选择“使用安全客户端”选项，并且未安装非安全版本的 Naviphere CLI。
* 确认数据收集器配置中的 NaviSphere CLI 安装目录正确
* 确认数据收集器配置中 VNX 块存储的 IP 正确：
* 来自Data Infrastructure Insights采集单元：
+
** 打开 CMD。
** 将目录更改为配置的安装目录
** 尝试通过输入“navicli -h {ip} getagent”与 VNX 块存储设备建立连接（将 {ip} 替换为实际 IP）






 a| 
错误：4.29 emc235848 emc241018 getall 无法解析主机别名信息
 a| 
这可能是由于阵列本身的主机启动器数据库的 FLARE 29 损坏问题引起的。请参阅 EMC 知识库文章：emc235848、emc241018。您还可以检查 https://now.netapp.com/Knowledgebase/solutionarea.asp?id=kb58128[]



 a| 
错误：无法检索元 LUN。执行 java -jar navicli.jar 时出错
 a| 
* 修改数据收集器配置以使用安全客户端（推荐）
* 在 navicli.exe 或 naviseccli.exe 的 CLI 路径中安装 navicli.jar
* 注意：从 EMC Navisphere 版本 6.26 开始，navicli.jar 已弃用
* navicli.jar 可能在 \ http://powerlink.emc.com上提供




 a| 
错误：存储池未报告配置 IP 地址的服务处理器上的磁盘
 a| 
使用两个服务处理器 IP 配置数据收集器，以逗号分隔



 a| 
错误：修订不匹配错误
 a| 
* 这通常是由于更新了 VNX 块存储设备上的固件，但没有更新 NaviCLI.exe 的安装造成的。这也可能是由于不同的设备具有不同的固件，但只安装了一个 CLI（具有不同的固件版本）造成的。
* 验证设备和主机是否都运行相同版本的软件：
+
** 从Data Infrastructure Insights采集单元打开命令行窗口
** 将目录更改为配置的安装目录
** 通过输入“navicli -h <ip> getagent”与 CLARiiON 设备建立连接
** 在前几行查找版本号。例如：“代理版本：6.16.2 (0.1)”
** 查找并比较第一行的版本。示例：“Navisphere CLI 修订版 6.07.00.04.07”






 a| 
错误：不支持的配置 - 没有光纤通道端口
 a| 
该设备未配置任何光纤通道端口。目前仅支持 FC 配置。验证此版本/固件是否受支持。

|===
更多信息可从link:concept_requesting_support.html["支持"]页面或在link:reference_data_collector_support_matrix.html["数据收集器支持矩阵"]。
