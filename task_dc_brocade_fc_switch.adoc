---
sidebar: sidebar 
permalink: task_dc_brocade_fc_switch.html 
keywords: data collector, Brocade, FC switch, 
summary: 配置Brocade FC 交换机数据收集器。 
---
= Brocade FC交换机数据采集器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights使用Brocade FC 交换机 (SSH) 数据源来发现运行 Factored 操作系统 (FOS) 固件 4.2 及更高版本的Brocade或更名交换机设备的库存。支持 FC 交换机和接入网关模式的设备。



== Terminology

Data Infrastructure Insights从Brocade FC 交换机数据收集器获取以下库存信息。对于Data Infrastructure Insights获取的每种资产类型，都会显示用于该资产的最常用术语。查看或排除此数据收集器的故障时，请记住以下术语：

[cols="2*"]
|===
| 供应商/型号术语 | Data Infrastructure Insights术语 


| 交换机 | 交换机 


| 端口 | 端口 


| 虚拟结构、物理结构 | 网络结构 


| 分区 | 分区 


| 逻辑交换机 | 逻辑交换机 


| 虚拟卷 | 卷 


| LSAN 区域 | IVR区域 
|===
注意：这些只是常见的术语映射，可能并不代表此数据收集器的所有情况。



== 要求

* Data Infrastructure Insights采集单元 (AU) 将启动与Brocade交换机上的 TCP 端口 22 的连接以收集库存数据。  AU 还将启动与 UDP 端口 161 的连接以收集性能数据。
* 结构中的所有交换机都必须具有 IP 连接。如果选中“发现结构中的所有交换机”复选框，Data Infrastructure Insights将识别结构中的所有交换机；但是，它需要与这些额外的交换机建立 IP 连接才能发现它们。
* 结构中的所有交换机都需要全局使用相同的帐户。您可以使用PuTTY（开源终端仿真器）来确认访问。
* 端口 161 和 162 必须对结构中的所有交换机开放，以进行 SNMP 性能轮询。
* SNMP 只读社区字符串




== 配置

[cols="2*"]
|===
| 字段 | 描述 


| 切换 IP | EFC 服务器的 IP 地址或完全限定域名 


| 用户名 | 交换机的用户名 


| 密码 | 交换机密码 


| SNMP | SNMP 版本 


| SNMP 社区字符串 | 用于访问交换机的 SNMP 只读社区字符串 


| SNMP 用户名 | SNMP 用户名 


| SNMP 密码 | SNMP 密码 
|===


== 高级配置

[cols="2*"]
|===
| 字段 | 描述 


| 面料名称 | 数据收集器要报告的织物名称。留空则将结构名称报告为 WWN。 


| 库存轮询间隔（分钟） | 库存调查之间的间隔。默认值为 15。 


| 排除的设备 | 要从轮询中排除的设备 ID 的逗号分隔列表 


| 管理域处于活动状态 | 如果使用管理域，请选择 


| 检索 MPR 数据 | 选择从多协议路由器获取路由数据。 


| 启用陷印 | 选择在从设备接收到 SNMP 陷阱时启用采集。如果选择启用捕获，则还必须激活 SNMP。 


| 陷阱之间的最短时间（秒） | 陷阱触发的获取尝试之间的最短时间。默认值为 10。 


| 发现结构中的所有交换机 | 选择发现结构中的所有交换机 


| 选择支持 HBA 还是区域别名 | 选择是否支持 HBA 或区域别名 


| 性能轮询间隔（秒） | 性能轮询之间的间隔。默认值为 300。 


| SNMP 认证协议 | SNMP 身份验证协议（仅限 SNMP v3） 


| SNMP 隐私密码 | SNMP 隐私密码（仅限 SNMP v3） 


| SNMP 重试 | SNMP 重试次数 
|===


== 故障排除

如果您在使用此数据收集器时遇到问题，请尝试以下操作：



=== 清单

[cols="2*"]
|===
| 问题： | 尝试一下： 


| Brocade数据源的库存获取失败，并出现以下错误：<date> <time> 错误 [com.onaro.sanscreen.acquisition.framework.datasource.BaseDataSource] 错误 2（共 2 个）：<datasource name> [内部错误] - 无法为设备 <IP> 生成模型。检测提示错误 ([设备名称 <name>]: 无法为设备 <IP> 生成模型。错误检测提示） | 该问题可能是由于Brocade交换机返回提示的时间过长，超过了默认的 5 秒超时时间而引起的。在Data Infrastructure Insights中的数据收集器的高级配置设置中，尝试将_SSH Banner Wait Timeout (sec)_增加到更高的值。 


| 错误：“Data Infrastructure Insights收到无效的机箱角色” | 检查该数据源中配置的用户是否已被授予chassis角色权限。 


| 错误：“机箱 IP 地址不匹配” | 一般来说，DII 不支持采集单元和设备之间的网络地址转换或端口地址转换。  DII 可能检测到收集器配置中的主机名/IP 地址与设备认为拥有的任何地址不匹配。 


| 收到一条消息，提示有多个节点登录到 Access Gateway 端口 | 检查 NPV 设备是否正常运行以及所有连接的 WWN 是否符合预期。不要直接获取 NPV 设备。相反，获取核心结构交换机将收集 NPV 设备数据。 


| 错误：....登录的最大远程会话数... | FOS 对每个用户角色支持的并发 SSH 会话数量有不同的限制。由于违反这些限制，DII 与该设备的 SSH 会话在登录时被拒绝。这可能表明有重复的收藏家发现了相同的资产，应该避免这种情况 
|===


=== 性能

[cols="2*"]
|===
| 问题： | 尝试一下： 


| 性能收集失败，并显示“发送 SNMP 请求时超时”。 | 根据查询变量和交换机配置，某些查询可能会超过默认超时。link:https://kb.netapp.com/Cloud/ncds/nds/dii/dii_kbs/Data_Infrastructure_Insights_Brocade_data_source_fails_performance_collection_with_a_timeout_due_to_default_SNMP_configuration["了解更多"] 。 


| 性能收集失败，原因为...SNMP 表中发现重复行... | DII 检测到错误的 SNMP 响应。您可能正在运行 FOS 8.2.3e。升级到 8.2.3e2 或更高版本。 


| 性能收集失败，原因为...未知用户名... | 您已为 DII 收集器配置了“SNMP 用户名”值，但该值未插入 SNMPv3 用户槽之一。简单地在Brocade FOS 上创建一个用户并不一定将其作为 SNMPv3 用户启用 - 您必须将其放在 v3 用户槽之一中。 


| 性能收集失败，原因为...不支持的安全级别... | 您已将 DII 收集器配置为使用 SNMPv3，但相关设备上未启用加密（又称隐私）和/或授权设置。 


| 性能收集失败，显示...隐私密码为空，仅允许用于隐私协议 NONE | 您已将 DII 收集器配置为使用 SNMPv3，并使用加密（又称隐私协议）（AES 等），但您的“SNMP 隐私密码”值为空，因此 DII 无法与此设备协商加密的 SNMPv3 数据流 


| 性能收集失败，错误为.....VF:nn，无访问权限... | 您已将 DII 收集器配置为在启用了多个虚拟结构的设备上使用 SNMPv3，但 SNMPv3 用户没有 VF NN 的权限。  DII 不支持对物理资产进行部分发现 - 您应该始终主动授予 DII 对所有 128 个可能的 VF 的访问权限，因为 DII 将始终尝试检索给定物理设备上任何现存 VF 的性能数据 
|===
更多信息可从link:concept_requesting_support.html["支持"]页面或在link:reference_data_collector_support_matrix.html["数据收集器支持矩阵"]。
