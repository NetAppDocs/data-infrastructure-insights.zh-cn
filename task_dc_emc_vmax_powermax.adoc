---
sidebar: sidebar 
permalink: task_dc_emc_vmax_powermax.html 
keywords: data collector, EMC, DELL, vmax, powermax 
summary: 配置 Dell EMC VMAX 和 PowerMax 系列设备数据收集器。 
---
= Dell EMC VMAX 和 PowerMax 系列设备数据收集器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights通过使用 Solutions Enabler symcli 命令结合您环境中现有的 Solutions Enabler 服务器来发现 EMC VMAX 和 PowerMax 存储阵列。现有的 Solutions Enabler 服务器通过访问守门卷可以连接到 VMAX/PowerMax 存储阵列。



== 要求

在配置此数据收集器之前，您应该确保Data Infrastructure Insights与现有 Solutions Enabler 服务器上的端口 2707 具有 TCP 连接。Data Infrastructure Insights发现此服务器的所有“本地” Symmetrix 阵列，如该服务器的“symcfg list”输出中所示。

* 必须在采集单元服务器上安装带有 SMI-S 提供程序应用程序的 EMC Solutions Enabler (CLI)，并且其版本必须与 Solutions Enabler Server 上运行的版本匹配或更早。
* 需要正确配置的 {installdir}\EMC\SYMAPI\config\netcnfg 文件。该文件定义了 Solutions Enabler 服务器的服务名称以及访问方法（SECURE / NOSECURE /ANY）。
* 如果您需要存储节点级别的读/写延迟，则 SMI-S 提供程序必须与 UNISPHERE for VMAX 应用程序的正在运行的实例进行通信。
* 管理 Solutions Enabler 服务器的 IP 地址
* Solutions Enabler (SE) Server 上的管理员权限
* SE 软件的只读用户名和密码
* UNISPHERE for VMAX 应用程序必须正在运行并收集由 SMI-S 提供程序安装管理的 EMC VMAX 和 PowerMax sstorage 阵列的统计信息
* 访问性能验证：在采集单元的 Web 浏览器中，转到 _\https://<SMI-S 主机名或 IP>:5989/ecomconfig_，其中“SMI-S 主机名或 IP”是您的 SMI-S 服务器的 IP 地址或主机名。此 URL 是 EMC SMI-S（又名“ECOM”）服务的管理门户 - 您将收到一个登录弹出窗口。
* 必须在 Solutions Enabler 服务器的守护程序配置文件中声明权限，通常位于：_/var/symapi/config/daemon_users_
+
这是一个具有适当 cisys 权限的示例文件。

+
....
root@cernciaukc101:/root
14:11:25 # tail /var/symapi/config/daemon_users
###
###     Refer to the storrdfd(3) man page for additional details.
###
###     As noted above, only authorized users can perform stordaemon control
###     operations (e.g., shutdown).
################################################################################
# smith         storrdfd
cisys storapid <all>
....




== Terminology

Data Infrastructure Insights从 EMC VMAX/PowerMax 数据源获取以下库存信息。对于所获取的每种资产类型，都会显示用于该资产的最常用术语。查看或排除此数据收集器的故障时，请记住以下术语：

[cols="2*"]
|===
| 供应商/型号术语 | Data Infrastructure Insights术语 


| 磁盘 | 磁盘 


| 磁盘组 | 磁盘组 


| 存储 | 阵列存储 


| 导演 | 存储节点 


| 设备池、存储资源池（SRP） | 存储池 


| 设备 TDev | 卷 
|===
注意：这些只是常见的术语映射，可能并不代表此数据收集器的所有情况。



== 配置

*注意：*如果未启用 SMI-S 用户身份验证，则会忽略Data Infrastructure Insights数据收集器中的默认值。

[cols="2*"]
|===
| 字段 | 描述 


| 服务名称 | _netcnfg_ 文件中指定的服务名称 


| CLI 的完整路径 | 包含 Symmetrix CLI 的文件夹的完整路径 


| SMI-S 主机 IP 地址 | SMI-S主机的IP地址 
|===


== 高级配置

[cols="2*"]
|===
| 字段 | 描述 


| 库存轮询间隔（分钟） | 库存调查之间的间隔。默认值为 40 分钟。 


| 选择“排除”或“包含”来指定列表 | 指定收集数据时是否包含或排除以下数组列表。 


| 库存过滤器设备列表 | 要包含或排除的设备 ID 的逗号分隔列表 


| 连接缓存 | 选择连接缓存方法：* LOCAL 表示Cloud Insights Acquisition 服务正在 Solutions Enabler 服务器上运行，该服务器具有与您要发现的 Symmetrix 阵列的光纤通道连接，并且可以访问守卫卷。这可能在某些远程采集单元 (RAU) 配置中看到。 * REMOTE_CACHED 是默认值，在大多数情况下都应该使用。它使用 NETCNFG 文件设置通过 IP 连接到 Solutions Enabler 服务器，该服务器必须具有与您要发现的 Symmetrix 阵列的光纤通道连接，并且可以访问 Gatekeeper 卷。 * 如果 REMOTE_CACHED 选项导致 CLI 命令失败，请使用 REMOTE 选项。请记住，它会减慢获取过程（在极端情况下可能需要数小时甚至数天）。  NETCNFG 文件设置仍然用于与 Solutions Enabler 服务器建立 IP 连接，该服务器具有与正在发现的 Symmetrix 阵列的光纤通道连接。 *注意：*此设置不会改变“symcfg list”输出中列为 REMOTE 的阵列的Data Infrastructure Insights行为。Data Infrastructure Insights仅收集此命令显示为 LOCAL 的设备上的数据。 


| SMI-S协议 | 用于连接到 SMI-S 提供程序的协议。还显示使用的默认端口。 


| 覆盖 SMIS 端口 | 如果为空，则在连接类型字段中使用默认端口，否则输入要使用的连接端口 


| SMI-S 用户名 | SMI-S 提供程序主机的用户名 


| SMI-S 密码 | SMI-S 提供程序主机的用户名 


| 性能轮询间隔（秒） | 性能轮询之间的间隔（默认 1000 秒） 


| 选择“排除”或“包含”来指定列表 | 指定在收集性能数据时是否包含或排除以下数组列表 


| 性能过滤器设备列表 | 要包含或排除的设备 ID 的逗号分隔列表 
|===


== 故障排除

如果您在使用此数据收集器时遇到问题，请尝试以下操作：

[cols="2*"]
|===
| 问题： | 尝试一下： 


| 错误：所请求的功能目前未获得许可 | 安装 SYMAPI 服务器许可证。 


| 错误：未找到设备 | 确保 Symmetrix 设备配置为由 Solutions Enabler 服务器管理： - 运行 symcfg list -v 查看已配置的 Symmetrix 设备列表。 


| 错误：在服务文件中未找到请求的网络服务 | 确保 Solutions Enabler 服务名称已在 Solutions Enabler 的 netcnfg 文件中定义。该文件通常位于 Solutions Enabler 客户端安装中的 SYMAPI\config\ 下。 


| 错误：远程客户端/服务器握手失败 | 检查我们尝试发现的 Solutions Enabler 主机上最新的 storsrvd.log* 文件。 


| 错误：客户端证书中的通用名称无效 | 编辑 Solutions Enabler 服务器上的 _hosts_ 文件，以便采集单元的主机名解析为 Solutions Enabler 服务器上 storsrvd.log 中报告的 IP 地址。 


| 错误：函数无法获取内存 | 确保系统中有足够的可用内存来执行 Solutions Enabler 


| 错误：解决方案启动器无法提供所有所需数据。 | 调查 Solutions Enabler 的健康状况和负载概况 


| 错误：• 使用 Solutions Enabler 7.x 从 Solutions Enabler 服务器 8.x 收集数据时，“symcfg list -tdev”CLI 命令可能会返回不正确的数据。  • 使用 Solutions Enabler 8.1.0 或更早版本从 Solutions Enabler 服务器 8.3 或更高版本收集数据时，“symcfg list -srp”CLI 命令可能会返回不正确的数据。 | 确保您使用的是相同的 Solutions Enabler 主要版本 


| 我看到数据收集错误，消息为：“未知代码” | 如果 Solutions Enabler 服务器的守护程序配置文件中未声明权限，您可能会看到此消息（请参阅<<要求,要求>>多于。）这假设您的 SE 客户端版本与您的 SE 服务器版本相匹配。如果 _cisys_ 用户（执行 Solutions Enabler 命令）未在 /var/symapi/config/daemon_users 配置文件中配置必要的守护程序权限，也可能会出现此错误。要解决此问题，请编辑 /var/symapi/config/daemon_users 文件并确保 cisys 用户具有为 storapid 守护进程指定的 <all> 权限。例如：14:11:25 # tail /var/symapi/config/daemon_users ... cisys storapid <all> 
|===
更多信息可从link:concept_requesting_support.html["支持"]页面或在link:reference_data_collector_support_matrix.html["数据收集器支持矩阵"]。
