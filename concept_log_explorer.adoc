---
sidebar: sidebar 
permalink: concept_log_explorer.html 
keywords: logs, monitors, alerts, EMS, 
summary: 日志资源管理器是一个功能强大的工具，可用于通过不同的系统日志调查问题。 
---
= 日志资源管理器
:toc: macro
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toc: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/
:toc-position: content


[role="lead"]
Data Infrastructure Insight日志资源管理器是一款用于查询系统日志的强大工具。除了有助于调查之外，您还可以将日志查询保存在 Monitor 中，以便在激活特定日志触发器后发出警报。

要开始浏览日志，请单击*日志查询>+New Log Query*。

从列表中选择一个可用日志。

image:LogExplorer_2022.png["选择日志"]


NOTE: 根据您的环境，可供查询的日志类型可能会有所不同。随着时间的推移，可能会添加其他日志类型。

您可以设置筛选器以进一步细化查询结果。例如，要查找显示失败的所有日志消息，请为包含单词 "Failed" 的 _MESSAGES 设置一个筛选器。


TIP: 您可以开始在筛选器字段中键入所需文本；Data Infrastructure Insight将提示您创建一个通配符搜索、其中包含您键入的字符串。

结果将显示在一个图形中，其中显示了所示每个时间段内的日志实例数。图下方是日志条目临时文件。图形和条目会根据选定时间范围自动刷新。

image:LogExplorer_QueryForFailed.png["显示筛选器的查询示例"]



== 筛选



=== 包括/排除

在过滤日志时，您可以选择*include*(即“Filter to”)或*exinclude*您键入的字符串。排除的字符串在已完成的筛选器中显示为"Nt <string>(不是字符串)"。

image:Log_Advanced_Query_Filter_Exclude.png["显示排除选项的日志筛选器"]

基于通配符或表达式（例如 NOT ， OR ， "None" 等）在筛选器字段中显示为深蓝色。您直接从列表中选择的项目将以淡蓝色显示。


NOTE: 您可以随时单击 _Create a Log Monitor_ 根据当前筛选器创建新的监控器。



=== 高级筛选

在查询或信息板小工具中筛选文本或列表值时，在开始键入时，系统会显示一个选项，用于根据当前文本创建 * 通配符筛选器 * 。选择此选项将返回与通配符表达式匹配的所有结果。您也可以使用NOT、AND、OR或创建表达式、或者选择"无"选项以筛选空值。


NOTE: 构建筛选时、请务必尽早并经常保存查询。高级查询是"自由格式"字符串条目、构建时可能会出现解析错误。

查看此屏幕图像、其中显示了_logs.Kubernetes.event_日志高级查询的筛选结果。此页面中有许多内容、图片下方对此进行了说明：

image:Log_Advanced_Query_ScreenExplained.png["高级查询屏幕说明"]

. 此高级查询字符串用于筛选以下内容：
+
** 筛选带有_reason_且包含单词"Failed"的日志条目、但不包含任何特定原因"FailedMount"的日志条目。
** 请包括也包含_metadata.namespace_(包含单词"monitoring")的任何条目、但不包括"cm-monitoring"或"eg-monitoring"的特定名空间。
+
请注意、在上述情况下、由于"cm-monitoring"和"eg-monitoring"都包含短划线("-")、因此必须将这些字符串包含在双引号中、否则会显示解析错误。不包含短划线、空格等的字符串不需要用引号括起来。如果有疑问、请尝试将字符串放在引号中。



. 当前筛选器的结果(包括任何"筛选依据"值和"高级查询"筛选器)将显示在结果列表中。此列表可以按任何显示的列进行排序。要显示其他列、请选择"齿轮"图标。
. 图形已放大、仅显示特定时间范围内发生的日志结果。此处显示的时间范围反映了当前的缩放级别。选择_Reset Zendo_按钮、将缩放级别设置回当前Data Infrastructure Insight时间范围。
. 图表结果已按_sSource_字段进行分组。图表将在分组为颜色的每列中显示结果。将鼠标悬停在图表中的一列上将显示有关特定条目的一些详细信息。
+
image:Log_Advanced_Query_Group_Detail.png["分组的Hover详细信息"]





==== 细化筛选器

您可以使用以下内容来细化筛选器：

|===


| 筛选器 | 功能 


| * （星号） | 用于搜索所有内容 


| ？（问号） | 用于搜索特定数量的字符 


| 或 | 用于指定多个实体 


| 不是 | 用于从搜索结果中排除文本 


| 无 _ | 在所有字段中搜索空值 


| 不是 * | 在 _text-only_ 字段中搜索空值 
|===
如果将筛选器字符串用双引号括起来， Insight 会将第一个和最后一个报价之间的所有内容视为完全匹配。引号中的任何特殊字符或运算符将被视为文字。例如，筛选 "*" 将返回文字星号结果；在这种情况下，星号不会视为通配符。如果用双引号括起来，则运算符或和 NOT 也会被视为文字字符串。

您可以将简单筛选器与高级查询筛选器结合使用；生成的筛选器是这两者中的"and"。



=== 图表图例

图表下方的_Legend_也有一些惊喜。对于图例中显示的每个结果(基于当前筛选器)、您可以选择仅显示该行的结果(添加筛选器)、或者显示不属于该行的任何结果(添加排除筛选器)。图表和日志条目列表将更新、以根据您的选择显示结果。要删除此筛选、请再次打开图例、然后选择[X]以清除基于图例的筛选器。

image:Log_Advanced_Query_Legend.png["为第一个结果显示\"添加筛选器\"的高级查询图例"]



== 日志详细信息

单击列表中日志条目中的任意位置将打开该条目的详细信息窗格。您可以在此处了解有关此活动的更多信息。

单击 " 添加筛选器 " 将选定字段添加到当前筛选器。日志条目列表将根据新筛选器进行更新。

请注意、某些字段不能添加为筛选器；在这种情况下、_Add Filter_图标不可用。

image:LogExplorer_DetailPane.png["日志条目详细信息窗格"]



== 故障排除

您可以在此处找到有关排除日志查询问题的建议。

|===


| * 问题： * | * 请尝试此操作： * 


| 我的日志查询中未显示 "debug" 消息 | 未收集调试日志消息。要捕获所需的消息，请将相关消息严重性更改为 _informational ， error ， alert ， EMERGENCY ， _ 或 _notic_ 级别。 
|===