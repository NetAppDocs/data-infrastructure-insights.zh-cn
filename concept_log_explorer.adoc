---
sidebar: sidebar 
permalink: concept_log_explorer.html 
keywords: logs, monitors, alerts, EMS, 
summary: 日志浏览器是一个通过不同的系统日志调查问题的强大工具。 
---
= 日志浏览器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights日志浏览器是查询系统日志的强大工具。除了帮助调查之外，您还可以在监视器中保存日志查询，以便在激活特定日志触发器时提供警报。

要开始浏览日志，请单击*日志查询>+新日志查询*。

从列表中选择可用的日志。

image:LogExplorer_2022.png["选择您的日志"]


NOTE: 可供查询的日志类型可能根据您的环境而有所不同。随着时间的推移，可能会添加其他日志类型。

您可以设置过滤器来进一步优化查询结果。例如，要查找所有显示失败的日志消息，请为包含单词“失败”的_Messages_设置过滤器。


TIP: 您可以在过滤器字段中开始输入所需的文本； Data Infrastructure Insights将提示您创建包含您输入的字符串的通配符搜索。

结果以图表形式显示，显示每个时间段内的日志实例数量。图表下方是日志条目本身。图表和条目根据所选的时间范围自动刷新。

image:LogExplorer_QueryForFailed.png["显示过滤器的查询示例"]



== 筛选



=== 包括/排除

过滤日志时，您可以选择*包含*（即“过滤到”）或*排除*您输入的字符串。排除的字符串在完成的过滤器中显示为“NOT <string>”。

image:Log_Advanced_Query_Filter_Exclude.png["日志过滤器显示排除选项"]

基于通配符或表达式的过滤器（例如 NOT、OR、“无”等）在过滤器字段中以深蓝色显示。您直接从列表中选择的项目显示为浅蓝色。


NOTE: 在任何时候，您都可以单击“创建日志监视器”以根据当前过滤器创建新的监视器。



=== 高级过滤

当您在查询或仪表板小部件中过滤文本或列表值时，当您开始输入时，系统会向您显示基于当前文本创建*通配符过滤器*的选项。选择此选项将返回与通配符表达式匹配的所有结果。您还可以使用 NOT、AND 或 OR 创建表达式，或者选择“无”选项来过滤空值。


NOTE: 在构建过滤时，请务必尽早并经常保存查询。高级查询是“自由格式”的字符串输入，在构建时可能会出现解析错误。

看一下此屏幕图像，其中显示了对 _logs.kubernetes.event_ 日志的高级查询的过滤结果。此页面上有很多内容，如下图所示：

image:Log_Advanced_Query_ScreenExplained.png["高级查询屏幕说明"]

. 此高级查询字符串可过滤以下内容：
+
** 过滤包含单词“failed”的_reason_日志条目，但不过滤任何包含“FailedMount”具体原因的日志条目。
** 包括任何包含“metadata.namespace”且包含单词“monitoring”的条目，但排除“cm-monitoring”或“eg-monitoring”的特定命名空间。
+
请注意，在上述情况下，由于“cm-monitoring”和“eg-monitoring”都包含破折号（“-”），因此必须将字符串包含在双引号中，否则将显示解析错误。不包含破折号、空格等的字符串不需要用引号引起来。如果有疑问，请尝试将字符串放在引号中。



. 当前过滤器的结果（包括任何“过滤依据”值和高级查询过滤器）都显示在结果列表中。该列表可以按照任何显示的列进行排序。要显示其他列，请选择“齿轮”图标。
. 该图表已被放大，仅显示在特定时间范围内发生的日志结果。此处显示的时间范围反映了当前的缩放级别。选择“重置缩放”按钮将缩放级别设置回当前Data Infrastructure Insights时间范围。
. 图表结果已按_source_字段分组。图表按颜色分组显示了每列的结果。将鼠标悬停在图表中的某一列上将显示有关特定条目的一些详细信息。
+
image:Log_Advanced_Query_Group_Detail.png["分组悬停详细信息"]





==== 精炼过滤器

您可以使用以下内容来优化过滤器：

|===


| 筛选器 | 它的作用 


| *（星号） | 让您搜索一切 


| ? （问号） | 使您能够搜索特定数量的字符 


| 或 | 使您能够指定多个实体 


| 不是 | 允许您从搜索结果中排除文本 


| _没有任何_ | 在所有字段中搜索 NULL 值 


| 不是 * | 在纯文本字段中搜索 NULL 值 
|===
如果将过滤字符串括在双引号中，Insight 会将第一个引号和最后一个引号之间的所有内容视为完全匹配。引号内的任何特殊字符或运算符都将被视为文字。例如，过滤“*”将返回文字星号的结果；在这种情况下，星号不会被视为通配符。当运算符 OR 和 NOT 括在双引号中时，它们也将被视为文字字符串。

您可以将简单过滤器与高级查询过滤器结合起来；生成的过滤器是两者的“AND”。



=== 图表图例

图表下方的“图例”也有一些惊喜。对于图例中显示的每个结果（基于当前过滤器），您可以选择仅显示该行的结果（添加过滤器），或者显示不属于该行的任何结果（添加排除过滤器）。图表和日志条目列表将更新以显示基于您的选择的结果。要删除此过滤，请再次打开图例并选择 [X] 以清除基于图例的过滤器。

image:Log_Advanced_Query_Legend.png["高级查询图例显示第一个结果的“添加过滤器”"]



== 日志详细信息

单击列表中日志条目的任意位置将打开该条目的详细信息窗格。您可以在这里探索有关该活动的更多信息。

点击“添加过滤器”将选定的字段添加到当前过滤器。日志条目列表将根据新的过滤器进行更新。

请注意，某些字段无法添加为过滤器；在这些情况下，“添加过滤器”图标不可用。

image:LogExplorer_DetailPane.png["日志条目详细信息窗格"]



== 故障排除

在这里您可以找到有关解决日志查询问题的建议。

|===


| *问题：* | *试试这个：* 


| 我在日志查询中没有看到“调试”消息 | 未收集调试日志消息。要捕获您想要的消息，请将相关消息的严重性更改为_信息、错误、警报、紧急_或_通知_级别。 
|===