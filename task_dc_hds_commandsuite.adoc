---
sidebar: sidebar 
permalink: task_dc_hds_commandsuite.html 
keywords: data collector, Hitachi Vantara Command Suite, Hitachi 
summary: 配置 HDS Command Suite 设备管理器数据收集器。 
---
= Hitachi Vantara Command Suite 数据收集器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Hitachi Vantara Command Suite 数据收集器支持 HiCommand Device Manager 服务器。Data Infrastructure Insights使用标准 HiCommand API 与 HiCommand 设备管理器服务器通信。



== Terminology

Data Infrastructure Insights从 Hitachi Vantara Command Suite 数据收集器获取以下库存信息。对于Data Infrastructure Insights获取的每种资产类型，都会显示用于该资产的最常用术语。查看或排除此数据收集器的故障时，请记住以下术语：

[cols="2*"]
|===
| 供应商/型号术语 | Data Infrastructure Insights术语 


| PDEV | 磁盘 


| 期刊池 | 磁盘组 


| 存储阵列 | 存储 


| 端口控制器 | 存储节点 


| 阵列组、HDS 池 | 存储池 


| 逻辑单元，LDEV | 卷 
|===
注意：这些只是常见的术语映射，可能并不代表此数据收集器的所有情况。



=== 存储

以下术语适用于您可能在 HDS 存储资产登录页面上找到的对象或参考。其中许多术语也适用于其他数据收集器。

* 名称 – 通过 GetStorageArray XML API 调用直接来自 HDS HiCommand Device Manager 的“名称”属性
* 模型 - 通过 GetStorageArray XML API 调用直接来自 HDS HiCommand Device Manager 的“arrayType”属性
* 供应商 – HDS
* 系列 - 通过 GetStorageArray XML API 调用直接来自 HDS HiCommand Device Manager 的“arrayFamily”属性
* IP – 这是阵列的管理 IP 地址，而不是阵列上所有 IP 地址的详尽列表
* 原始容量 – 以 2 为底的值，表示此系统中所有磁盘的总容量之和，无论磁盘角色如何。




=== 存储池

以下术语适用于您可能在 HDS 存储池资产登录页面上找到的对象或引用。其中许多术语也适用于其他数据收集器。

* 类型：此处的值将是以下之一：
+
** 保留 – 如果此池专用于数据卷以外的目的，即日志记录、快照
** 精简配置 – 如果这是一个 HDP 池
** 突袭小组 – 您可能不会看到这些，原因如下：
+
Data Infrastructure Insights采取强硬立场，不惜一切代价避免重复计算容量。在 HDS 上，通常需要从磁盘构建 Raid 组，在这些 Raid 组上创建池卷，并从这些池卷构建池（通常是 HDP，但可以是特殊用途的）。如果Data Infrastructure Insights报告底层 Raid 组和池，则它们的原始容量总和将大大超过磁盘的总和。

+
相反， Data Infrastructure Insights的 HDS Command Suite 数据收集器会根据池卷的容量任意缩小 Raid Groups 的大小。这可能导致Data Infrastructure Insights根本不报告 Raid 组。此外，任何生成的 Raid 组都会被标记，使得它们在Data Infrastructure InsightsWebUI 中不可见，但它们会流入Data Infrastructure Insights数据仓库 (DWH)。这些决定的目的是避免大多数用户不关心的事情导致 UI 混乱——如果您的 HDS 阵列有 50MB 可用的 Raid 组，您可能无法将该可用空间用于任何有意义的结果。



* 节点 - N/A，因为 HDS 池不绑定到任何一个特定节点
* 冗余 - 池的 RAID 级别。对于由多种 RAID 类型组成的 HDP 池，可能有多个值
* 容量百分比 - 池中数据使用的百分比，包括已使用的 GB 和池的总逻辑 GB 大小
* 超额承诺容量 - 一个派生值，表示“由于逻辑卷总和超出池逻辑容量的百分比，该池的逻辑容量超额认购了该百分比”
* 快照 - 显示此池上为快照使用保留的容量




=== 存储节点

以下术语适用于您可能在 HDS 存储节点资产登录页面上找到的对象或参考。其中许多术语也适用于其他数据收集器。

* 名称 – 单片阵列上的前端控制器 (FED) 或通道适配器的名称，或模块化阵列上的控制器的名称。给定的 HDS 阵列将有 2 个或更多存储节点
* 卷 – 卷表将显示映射到此存储节点拥有的任何端口的任何卷




== 库存需求

为了收集库存数据，您必须具备以下条件：

* HiCommand 设备管理器服务器的 IP 地址
* HiCommand 设备管理器软件的只读用户名和密码以及对等权限
* 端口要求：2001（http）或 2443（https）
* 使用用户名和密码登录 HiCommand 设备管理器软件
* 验证对 HiCommand 设备管理器的访问权限 \http://<HiCommand_Device_Manager_IP>:2001/service/StorageManager




== 性能要求

为了收集性能数据，必须满足以下要求：

* HDS USP、USP V 和 VSP 性能
+
** 性能监视器必须获得许可。
** 必须开启监控开关。
** 必须将导出工具（Export.exe）复制到Data Infrastructure InsightsAU。
** 导出工具版本必须与目标阵列的微码版本匹配。


* AMS 性能：
+
** NetApp强烈建议在 AMS 阵列上创建一个专用服务帐户，以供Data Infrastructure Insights用于检索性能数据。 Storage Navigator 仅允许一个用户帐户同时登录阵列。让Data Infrastructure Insights使用与管理脚本或 HiCommand 相同的用户帐户可能会导致Data Infrastructure Insights、管理脚本或 HiCommand 因一个并发用户帐户登录限制而无法与阵列通信
** 性能监视器必须获得许可。
** 需要在Data Infrastructure Insights AU 上安装 Storage Navigator Modular 2 (SNM2) CLI 实用程序。






== 配置

[cols="2*"]
|===
| 字段 | 描述 


| HiCommand 服务器 | HiCommand Device Manager 服务器的 IP 地址或完全限定域名 


| 用户名 | HiCommand 设备管理器服务器的用户名。 


| 密码 | HiCommand 设备管理器服务器使用的密码。 


| 设备 - VSP G1000 (R800)、VSP (R700)、HUS VM (HM700) 和 USP 存储 | VSP G1000 (R800)、VSP (R700)、HUS VM (HM700) 和 USP 存储的设备列表。每个存储都需要：* 阵列的 IP：存储的 IP 地址* 用户名：存储的用户名* 密码：存储的密码* 包含导出实用程序 JAR 文件的文件夹 


| SNM2Devices - WMS/SMS/AMS 存储 | WMS/SMS/AMS 存储的设备列表。每个存储都需要：* 阵列的 IP：存储的 IP 地址* 存储导航器 CLI 路径：SNM2 CLI 路径* 帐户身份验证有效：选择以选择有效的帐户身份验证* 用户名：存储的用户名* 密码：存储的密码 


| 选择性能调优管理器 | 覆盖其他性能选项 


| 调优管理器主机 | 调优管理器的 IP 地址或完全限定域名 


| 覆盖调整管理器端口 | 如果为空，则使用“选择性能调整管理器”字段中的默认端口，否则输入要使用的端口 


| 调优经理用户名 | 调优管理器的用户名 


| 调优管理员密码 | 调优管理员密码 
|===
注意：在 HDS USP、USP V 和 VSP 中，任何磁盘都可以属于多个阵列组。



== 高级配置

|===


| 字段 | 描述 


| 连接类型 | HTTPS 或 HTTP，还显示默认端口 


| HiCommand 服务器端口 | 用于 HiCommand 设备管理器的端口 


| 库存轮询间隔（分钟） | 库存调查之间的间隔。默认值为 40。 


| 选择“排除”或“包含”来指定列表 | 指定收集数据时是否包含或排除以下数组列表。 


| 过滤设备列表 | 要包含或排除的设备序列号的逗号分隔列表 


| 性能轮询间隔（秒） | 性能轮询之间的间隔。默认值为 300。 


| 导出超时（秒） | 导出实用程序超时。默认值为 300。 
|===


== 故障排除

如果您在使用此数据收集器时遇到问题，请尝试以下操作：



=== 清单

[cols="2*"]
|===
| 问题： | 尝试一下： 


| 错误：用户没有足够的权限 | 使用具有更多权限的其他用户帐户或增加数据收集器中配置的用户帐户的权限 


| 错误：存储列表为空。设备未配置或用户没有足够的权限 | * 使用 DeviceManager 检查设备是否已配置。  * 使用具有更多权限的其他用户帐户，或增加用户帐户的权限 


| 错误：HDS 存储阵列几天未刷新 | 调查为什么此阵列未在 HDS HiCommand 中刷新。 
|===


=== 性能

[cols="2*"]
|===
| 问题： | 尝试一下： 


| 错误：* 执行导出实用程序时出错 * 执行外部命令时出错 | * 确认导出实用程序已安装在Data Infrastructure Insights采集单元上 * 确认导出实用程序在数据收集器配置中的位置正确 * 确认 USP/R600 阵列的 IP 在数据收集器的配置中正确 * 确认用户名和密码在数据收集器的配置中正确 * 确认导出实用程序版本与存储阵列微代码版本兼容 * 从Data Infrastructure Insights采集单元打开 CMD 提示符并执行以下操作： - 将目录更改为配置的安装目录 - 尝试通过执行批处理文件 runWin.bat 与配置的存储阵列建立连接 


| 错误：目标 IP 的导出工具登录失败 | * 确认用户名/密码正确 * 创建一个主要为此 HDS 数据收集器的用户 ID * 确认没有配置其他数据收集器来获取此阵列 


| 错误：导出工具记录“无法获取监控的时间范围”。 | * 确认阵列上已启用性能监控。  * 尝试调用Data Infrastructure Insights之外的导出工具来确认问题出在Data Infrastructure Insights之外。 


| 错误：* 配置错误：导出实用程序不支持存储阵列 * 配置错误：存储导航器模块化 CLI 不支持存储阵列 | * 仅配置支持的存储阵列。  * 使用“过滤设备列表”排除不受支持的存储阵列。 


| 错误：* 执行外部命令时出错 * 配置错误：Inventory 未报告存储阵列 * 配置错误：导出文件夹不包含 jar 文件 | * 检查导出实用程序位置。  * 检查所讨论的存储阵列是否在 HiCommand 服务器中配置 * 将性能轮询间隔设置为 60 秒的倍数。 


| 错误：* 存储导航器 CLI 错误 * 执行 auperform 命令时出错 * 执行外部命令时出错 | * 确认存储导航器模块化 CLI 已安装在Data Infrastructure Insights采集单元上 * 确认存储导航器模块化 CLI 在数据收集器配置中的位置正确 * 确认数据收集器的配置中 WMS/SMS/SMS 阵列的 IP 正确 * 确认存储导航器模块化 CLI 版本与数据收集器中配置的存储阵列的微代码版本兼容 * 从Data Infrastructure Insights采集单元打开 CMD 提示符并执行以下操作： - 将目录更改为配置的安装目录 - 尝试通过执行以下命令“auunitref.exe”与配置的存储阵列建立连接 


| 错误：配置错误：库存未报告存储阵列 | 检查相关存储阵列是否在 HiCommand 服务器中配置 


| 错误：* 没有阵列在 Storage Navigator Modular 2 CLI 中注册 * 阵列未在 Storage Navigator Modular 2 CLI 中注册 * 配置错误：存储阵列未在 StorageNavigator Modular CLI 中注册 | * 打开命令提示符并将目录更改为配置的路径 * 运行命令“set=STONAVM_HOME=”。  * 运行命令“auunitref” * 确认命令输出包含带有 IP 的阵列详细信息 * 如果输出不包含阵列详细信息，则使用 Storage Navigator CLI 注册阵列： - 打开命令提示符并将目录更改为配置的路径 - 运行命令“set=STONAVM_HOME=”。 - 运行命令“auunitaddauto -ip <ip>”。将 <ip> 替换为正确的 IP。 
|===
更多信息可从link:concept_requesting_support.html["支持"]页面或在link:reference_data_collector_support_matrix.html["数据收集器支持矩阵"]。
